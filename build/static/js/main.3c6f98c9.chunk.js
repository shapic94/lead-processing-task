(this["webpackJsonplead-processing-task"]=this["webpackJsonplead-processing-task"]||[]).push([[0],{34:function(t,e,n){},35:function(t,e,n){},36:function(t,e,n){},50:function(t,e,n){},51:function(t,e,n){},52:function(t,e,n){},53:function(t,e,n){},54:function(t,e,n){},59:function(t,e,n){},60:function(t,e,n){},61:function(t,e,n){},63:function(t,e,n){"use strict";n.r(e);var s=n(0),i=n.n(s),c=n(17),a=n.n(c),r=(n(34),n(35),n(15)),o=n(4),l=(n(36),n(1)),u=function(){return Object(l.jsxs)("div",{className:"login",children:[Object(l.jsx)("div",{children:Object(l.jsx)(r.b,{to:"/admin-dashboard",children:Object(l.jsx)("button",{children:"Login as admin"})})}),Object(l.jsx)("div",{children:Object(l.jsx)(r.b,{to:"/user-dashboard",children:Object(l.jsx)("button",{children:"Login as user"})})})]})},j=n(5),b=n(6),d=n(7),h=n(9),p=n(8),O=n(11),f=n(26),x=(n(50),function(t){Object(h.a)(n,t);var e=Object(p.a)(n);function n(){return Object(b.a)(this,n),e.apply(this,arguments)}return Object(d.a)(n,[{key:"render",value:function(){return Object(l.jsx)("div",{className:"email",children:Object(l.jsx)("div",{className:"col-md-12",children:Object(l.jsx)("div",{children:Object(l.jsx)("p",{children:this.props.email.body})})})})}}]),n}(s.Component)),m=Object(O.b)((function(t){return{email:t.global.email}}))(x),v=(n(51),function(t){Object(h.a)(n,t);var e=Object(p.a)(n);function n(){return Object(b.a)(this,n),e.apply(this,arguments)}return Object(d.a)(n,[{key:"render",value:function(){return Object(l.jsx)("div",{className:"userStatus",children:this.props.user&&Object(l.jsxs)("div",{children:[Object(l.jsx)("span",{className:this.props.user.status}),Object(l.jsx)("span",{children:this.props.user.status})]})})}}]),n}(s.Component)),y=Object(O.b)((function(t){return{user:t.global.user}}))(v);function g(t){return{type:"SET_USER",payload:t}}function k(t){return{type:"SET_EMAIL",payload:t}}n(52);var N=function(t){Object(h.a)(n,t);var e=Object(p.a)(n);function n(){return Object(b.a)(this,n),e.apply(this,arguments)}return Object(d.a)(n,[{key:"onClickStatus",value:function(t){this.props.setUser(Object(j.a)(Object(j.a)({},this.props.user),{},{status:t}))}},{key:"render",value:function(){var t=this;return Object(l.jsx)("div",{className:"navigation",children:Object(l.jsxs)("nav",{children:[Object(l.jsxs)("ul",{children:[Object(l.jsx)("li",{children:"Home"}),Object(l.jsxs)("li",{children:["Status",Object(l.jsxs)("ul",{children:[Object(l.jsx)("li",{onClick:function(){return t.onClickStatus("online")},children:"Online"}),Object(l.jsx)("li",{onClick:function(){return t.onClickStatus("away")},children:"Away"})]})]})]}),Object(l.jsxs)("ul",{children:[Object(l.jsx)("li",{children:Object(l.jsx)(y,{})}),Object(l.jsx)("li",{children:Object(l.jsx)(r.b,{to:"/",children:"Logout"})})]})]})})}}]),n}(s.Component),S=Object(O.b)(null,(function(t){return{setUser:function(e){return t(g(e))},setEmail:function(e){return t(k(e))}}}))(N),C=(n(53),n(27)),E=n.n(C),w=(n(54),function(t){Object(h.a)(n,t);var e=Object(p.a)(n);function n(){var t;return Object(b.a)(this,n),(t=e.call(this)).state={loading:!0,color:"#36d7b7"},t}return Object(d.a)(n,[{key:"render",value:function(){return Object(l.jsxs)("div",{className:"loading",children:[Object(l.jsx)(E.a,{color:this.state.color,loading:this.state.loading,size:20}),Object(l.jsx)("span",{className:"loading-text",children:"Waiting for new email"})]})}}]),n}(s.Component)),_=n(28),T=n.n(_),U=(n(59),function(t){Object(h.a)(n,t);var e=Object(p.a)(n);function n(){var t;return Object(b.a)(this,n),(t=e.call(this)).state={loading:!0,color:"#36d7b7"},t}return Object(d.a)(n,[{key:"render",value:function(){return Object(l.jsxs)("div",{className:"idle",children:[Object(l.jsx)(T.a,{color:this.state.color,loading:this.state.loading,size:50}),Object(l.jsxs)("span",{className:"idle-text",children:["You are currently ",this.props.user.status,"."]})]})}}]),n}(s.Component)),A=Object(O.b)((function(t){return{user:t.global.user}}))(U),L=(n(60),function(t){Object(h.a)(n,t);var e=Object(p.a)(n);function n(){return Object(b.a)(this,n),e.apply(this,arguments)}return Object(d.a)(n,[{key:"onClickAction",value:function(t){this.props.setEmail(Object(j.a)(Object(j.a)({},this.props.email),{},{status:t}))}},{key:"render",value:function(){var t=this;return Object(l.jsxs)("div",{className:"email-actions",children:[Object(l.jsx)("button",{type:"button",onClick:function(){return t.onClickAction("Positive reply")},children:"Positive reply"}),Object(l.jsx)("button",{type:"button",onClick:function(){return t.onClickAction("Neutral reply")},children:"Neutral reply"}),Object(l.jsx)("button",{type:"button",onClick:function(){return t.onClickAction("Not a lead")},children:"Not a lead"})]})}}]),n}(s.Component)),P=Object(O.b)((function(t){return{email:t.global.email}}),(function(t){return{setEmail:function(e){return t(k(e))}}}))(L),D=function(t){Object(h.a)(n,t);var e=Object(p.a)(n);function n(){var t;return Object(b.a)(this,n),(t=e.call(this)).state={client:new f.w3cwebsocket("wss://8wyzugxnaf.execute-api.us-east-2.amazonaws.com/production")},t}return Object(d.a)(n,[{key:"componentWillMount",value:function(){var t=this;console.log("uslo"),this.state.client.onopen=function(){console.log("online"),t.props.setUser(Object(j.a)(Object(j.a)({},t.props.user),{},{status:"online"}))},this.state.client.onmessage=function(e){var n=JSON.parse(e.data);"status"in n?t.props.setUser(Object(j.a)(Object(j.a)({},t.props.user),{},{status:n.status})):"email"in n&&t.props.setEmail(n.email)},this.state.client.onclose=function(){console.log("offline"),t.props.setUser(Object(j.a)(Object(j.a)({},t.props.user),{},{status:"offline"}))}}},{key:"componentDidUpdate",value:function(t,e,n){t.user&&this.props.user&&t.user.status!==this.props.user.status&&this.state.client.readyState===this.state.client.OPEN&&(this.state.client.send(JSON.stringify({type:"USER_STATUS",user:this.props.user,email:this.props.email})),"away"===this.props.user.status&&this.props.setEmail(null)),t.email&&this.props.email&&t.email.status!==this.props.email.status&&this.state.client.readyState===this.state.client.OPEN&&(this.state.client.send(JSON.stringify({type:"EMAIL_STATUS",email:this.props.email})),this.props.setEmail(null))}},{key:"render",value:function(){return Object(l.jsxs)("div",{className:"userDashboard",children:[Object(l.jsx)(S,{}),Object(l.jsxs)("div",{className:"emailWrapper",children:[this.props.user&&"online"===this.props.user.status&&Object(l.jsxs)("div",{children:[!this.props.email&&Object(l.jsx)(w,{}),this.props.email&&Object(l.jsx)(m,{})]}),this.props.user&&"away"===this.props.user.status&&Object(l.jsx)(A,{}),this.props.user&&"offline"===this.props.user.status&&Object(l.jsx)(A,{})]}),Object(l.jsx)("div",{className:"actionWrapper",children:this.props.user&&this.props.email&&Object(l.jsx)(P,{})})]})}}]),n}(s.Component),z=Object(O.b)((function(t){return{user:t.global.user,email:t.global.email}}),(function(t){return{setUser:function(e){return t(g(e))},setEmail:function(e){return t(k(e))}}}))(D),I=n(29),J=(n(61),function(t){Object(h.a)(n,t);var e=Object(p.a)(n);function n(t){var s;return Object(b.a)(this,n),(s=e.call(this,t)).state={emails:[]},s}return Object(d.a)(n,[{key:"componentDidMount",value:function(){var t=this;fetch("https://1zkqwvw10d.execute-api.us-east-2.amazonaws.com/v2/lpt").then((function(t){return t.json()})).then((function(e){console.log(e),t.setState({emails:e})})).catch((function(t){console.log(t)}))}},{key:"onChangeEmail",value:function(t,e){var n=this.state.emails.map((function(n){return n.timestamp===e.timestamp&&(e.status=t.target.value),n}));this.setState({emails:n})}},{key:"onClickAction",value:function(t){var e=this;fetch("https://1zkqwvw10d.execute-api.us-east-2.amazonaws.com/v2/lpt",{method:"PUT",body:JSON.stringify(t)}).then((function(t){return t.json()})).then((function(t){e.setState({isLoaded:!0,items:t.items})})).catch((function(t){}))}},{key:"render",value:function(){var t=this,e=this.state.emails;return Object(l.jsx)("div",{children:e&&Object(l.jsxs)("div",{children:[Object(l.jsxs)("table",{children:[Object(l.jsx)("thead",{children:Object(l.jsxs)("tr",{children:[Object(l.jsx)("th",{children:"Date"}),Object(l.jsx)("th",{children:"Subject"}),Object(l.jsx)("th",{children:"Body"}),Object(l.jsx)("th",{children:"Status"}),Object(l.jsx)("th",{children:"Assigned"}),Object(l.jsx)("th",{})]})}),Object(l.jsx)("tbody",{children:e.map((function(e){return Object(l.jsxs)("tr",{children:[Object(l.jsx)("td",{children:e.date}),Object(l.jsx)("td",{children:e.subject}),Object(l.jsxs)("td",{"data-tip":e.body,children:[e.body.slice(0,20),"..."]}),Object(l.jsx)("td",{children:Object(l.jsxs)("select",{value:e.status,onChange:function(n){return t.onChangeEmail(n,e)},children:[Object(l.jsx)("option",{value:""}),Object(l.jsx)("option",{value:"Positive reply",children:"Positive reply"}),Object(l.jsx)("option",{value:"Neutral reply",children:"Neutral reply"}),Object(l.jsx)("option",{value:"Not a lead",children:"Not a lead"}),Object(l.jsx)("option",{value:"Pending",children:"Pending"})]})}),Object(l.jsx)("td",{children:e.assigned}),Object(l.jsx)("td",{children:Object(l.jsx)("button",{type:"button",onClick:function(){return t.onClickAction(e)},children:"Change"})})]},e.timestamp)}))})]}),Object(l.jsx)(I.a,{})]})})}}]),n}(s.Component));var M=function(){return Object(l.jsx)(r.a,{children:Object(l.jsx)("div",{className:"app",children:Object(l.jsxs)(o.c,{children:[Object(l.jsx)(o.a,{path:"/admin-dashboard",children:Object(l.jsx)(J,{})}),Object(l.jsx)(o.a,{path:"/user-dashboard",children:Object(l.jsx)(z,{})}),Object(l.jsx)(o.a,{path:"/",children:Object(l.jsx)(u,{})})]})})})},R=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,65)).then((function(e){var n=e.getCLS,s=e.getFID,i=e.getFCP,c=e.getLCP,a=e.getTTFB;n(t),s(t),i(t),c(t),a(t)}))},F=(n(62),n(18)),W=Object(F.a)({global:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"SET_USER":return Object(j.a)(Object(j.a)({},t),{},{user:e.payload});case"SET_EMAIL":return Object(j.a)(Object(j.a)({},t),{},{email:e.payload});default:return t}}}),X=Object(F.b)(W,window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__());a.a.render(Object(l.jsx)(i.a.StrictMode,{children:Object(l.jsx)(O.a,{store:X,children:Object(l.jsx)(M,{})})}),document.getElementById("root")),R()}},[[63,1,2]]]);
//# sourceMappingURL=main.3c6f98c9.chunk.js.map